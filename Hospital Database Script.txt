# Script to Create Hospital Database
# Version 1.1.0
# Creating Date 02/10/2019
# Last Updated On 02/10/2019	

# Has not been Tested!
# Rought Draft of the Script!
# Issues Super/Sub Type
# Nameing Choices / Varaible Choices
# HAS NOT BEEN TESTED!!!

DROP TABLE IF EXISTS DOCTOR_PATIENT;
DROP TABLE IF EXISTS TESTS;
DROP TABLE IF EXISTS DIAGNOSIS;
DROP TABLE IF EXISTS MEDICTION;
DROP TABLE IF EXISTS MEDICTION_PRESCRIBED;
DROP TABLE IF EXISTS PATIENT;
DROP TABLE IF EXISTS BILL;
DROP TABLE IF EXISTS CAFETERIA;
DROP TABLE IF EXISTS CAFETERIA_STAFF;
DROP TABLE IF EXISTS STAFF;
DROP TABLE IF EXISTS DOCTOR;
DROP TABLE IF EXISTS WORKER;
DROP TABLE IF EXISTS DEPARTMENT;

CREATE TABLE DEPARTMENT (
		Department_ID			TINYINT NOT NULL,
		Workers 			SMALLINT,
		Building_Location		VARCHAR(10),
	
	CONSTRAINT Department_PK PRIMARY KEY (Department_Number)
);


CREATE TABLE WORKER (
		Worker_ID 			SMALLINT NOT NULL,
		Name 				VARCHAR(20),
		Phone_Number 			INT,
		Gender 				VARCHAR(5),
		Salary 				INT,
		
	CONSTRAINT Worker_PK PRIMARY KEY (Worker_ID)
);


CREATE TABLE DOCTOR (
		Doctor_ID			SMALLINT NOT NULL, ******************************************************
		Experience			TINYINT,
		Qualification			VARCHAR(30),
		Department_ID			TINYINT,
		D_Worker_ID			SMALLINT,
		
	CONSTRAINT Doctor_PK PRIMARY KEY (Doctor_ID),
	CONSTRAINT Doctor_FK1 FOREIGN KEY (Department_ID) REFERENCES DEPARTMENT(Department_ID),
	CONSTRAINT Doctor_FK2 FOREIGN KEY (D_Worker_ID) REFERENCES WORKER(Worker_ID)
);


CREATE TABLE STAFF (
		Staff_ID			SMALLINT NOT NULL, ********************************************************
		Job_Title			VARCHAR(15),
		S_Worker_ID			SMALLINT,
		
	CONSTRAINT STAFF_PK PRIMARY KEY (Staff_ID),
	CONSTRAINT STAFF_FK1 FOREIGN KEY (S_Worker_ID) REFERENCES Worker(Worker_ID)
);


CREATE TABLE CAFETERIA_STAFF {
		Staff_ID 			SMALLINT NOT NULL,
		Position			VARCHAR(15),
		Cafeteria_ID			SMALLINT,
		
	CONSTRAINT CAFETERIA_STAFF_PK PRIMARY KEY (Staff_ID),
	CONSTRAINT CAFETERIA_STAFF_FK1 FOREIGN KEY (Staff_ID) REFERENCES STAFF(Staff_ID)
);


CREATE TABLE CAFETERIA (
		Cafeteria_ID			SMALLINT NOT NULL, *********************************************************
		Food_Type			VARCHAR(15),
		Seating				SMALLINT,
		
	CONSTRAINT CAFETERIA_PK PRIMARY KEY (Cafeteria_ID),
	CONSTRAINT CAFETERIA_FK1 FOREIGN KEY (Cafeteria_ID) REFERENCES CAFETERIA_STAFF(Cafeteria_ID)
);

CREATE TABLE BILL (
		Bill_ID				INT NOT NULL,
		Tests				VARCHAR(30),
		Treatment			VARCHAR(30),
		Time_Admitted			DATETIME,
		Prescription			VARCHAR(30),
		
	CONSTRAINT BILL_PK PRIMARY KEY (Bill_ID)
);


CREATE TABLE PATIENT (
		Patient_ID			INT NOT NULL,	
		Contact_Number			VARCHAR(10)
		Name				VARCHAR(20),
		Address				TEXT,
		Gender				VARCHAR(5),
		Age				SMALLINT,
		Blood_Type			VARCHAR(5)
		Cafeteria_ID			SMALLINT,
		Bill_ID				INT,
		
	CONSTRAINT PATIENT_PK PRIMARY KEY (Patient_ID),
	CONSTRAINT PATIENT_FK1 FOREIGN KEY (Cafeteria_ID) REFERENCES CAFETERIA(Cafeteria_ID),
	CONSTRAINT PATIENT_FK2 FOREIGN KEY (Bill_ID) REFERENCES BILL(Bill_ID)
);


CREATE TABLE MEDICTION_PRESCRIBED (
		Prescription_ID			INT NOT NULL,
		Medication_ID			VARCHAR(25),
		Patient_ID			INT,
		
	CONSTRAINT MEDICTION_PERSCRIBED_PK PRIMARY KEY (Prescription_ID),
	CONSTRAINT MEDICTION_PERSCRIBED_FK1 FOREIGN KEY (Patient_ID) REFERENCES PATIENT(Patient_ID)
);


CREATE TABLE MEDICTION (
		Medication_ID			INT NOT NULL,
		Doses				TINYINT,
		Expiration_Date			DATE,
		Doctor_ID			SMALLINT,
		
	CONSTRAINT MEDICTION_PK PRIMARY KEY (Medication_ID),
	CONSTRAINT MEDICTION_FK1 FOREIGN KEY (Medication_ID) REFERENCES MEDICTION_PRESCRIBED(Medication_ID),
	CONSTRAINT MEDICTION_FK2 FOREIGN KEY (Doctor_ID) REFERENCES DOCTOR(Doctor_ID)
);


CREATE TABLE DIAGNOSIS (
		Illness				VARCHAR(15) NOT NUll,
		Treatment			VARCHAR(20),
		Doctor_ID			SMALLINT,
		Patient_ID			INT,
		
	CONSTRAINT DIAGNOSIS_PK PRIMARY KEY (Illness),
	CONSTRAINT DIAGNOSIS_FK1 FOREIGN KEY (Doctor_ID) REFERENCES DOCTOR(Doctor_ID),
	CONSTRAINT DIAGNOSIS_FK2 FOREIGN KEY (Patient_ID) REFERENCES PATIENT(Patient_ID)
);


CREATE TABLE TESTS (
		Test_ID				INT NOT NUll,
		Result				TINYINT(1),
		Doctor_ID			SMALLINT,
		Illness				VARCHAR(15),
		Patient_ID			INT,
		
	CONSTRAINT TESTS_PK PRIMARY KEY (Test_ID),
	CONSTRAINT TESTS_FK1 FOREIGN KEY (Doctor_ID) REFERENCES DOCTOR(Doctor_ID),
	CONSTRAINT TESTS_FK2 FOREIGN KEY (Illness) REFERENCES DIAGNOSIS(Illness),
	CONSTRAINT TESTS_FK1 FOREIGN KEY (Patient_ID) REFERENCES PATIENT(Patient_ID)
);


CREATE TABLE DOCTOR_PATIENT (
		Doctor_ID			SMALLINT NOT NULL,
		Patient_ID			INT,
		Time				DATETIME,
		
	CONSTRAINT DOCTOR_PATIENT_PK PRIMARY KEY (Doctor_ID),
	CONSTRAINT DOCTOR_PATIENT_FK1 FOREIGN KEY (Doctor_ID) REFERENCES DOCTOR(Doctor_ID),
	CONSTRAINT DOCTOR_PATIENT_FK2 FOREIGN KEY (Patient_ID) REFERENCES PATIENT(Patient_ID)
);

